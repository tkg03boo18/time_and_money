<div class="container">
  <div class="row">
    <div class="col-sm-10 offset-sm-1 my-4">
      <h4 class="text-center">家計簿編集</h4>
      <div class="col-sm-8 offset-sm-2">
        <%= form_with model: @book, local: true do |f| %>
        <%= f.hidden_field :user_id, :value => current_user.id %>
        <div class="form-group field">
          <%= f.label :main_category, class: "form-control-label" %>
          <% main_category_options = MainCategory.order(:id).map { |c| [c.name, c.id, data: { children_path: main_category_sub_categories_path(c) }] } %>
          <%= f.select :main_category_id, main_category_options, { include_blank: true }, class: 'select-parent form-control' %>
        </div>
        <div class="form-group field">
          <%= f.label :sub_category, class: "form-control-label" %>
          <% sub_categories = @book.main_category.try(:sub_categories) || [] %>
          <% sub_category_options = sub_categories.map { |c| [c.name, c.id] } %>
          <%= f.select :sub_category_id, sub_category_options, { include_blank: true }, class: 'select-children form-control' %>
        </div>
        <div class="form-group field">
          <%= f.label :introduction, class: "form-control-label" %>
          <%= f.text_field :introduction, class: "form-control" %>
        </div>
        <div class="form-group field">
          <%= f.label :amount, class: "form-control-label" %>
          <%= f.text_field :amount, class: "form-control" %>
        </div>
        <div class="form-group field">
          <%= f.label :date, class: "form-control-label" %>
          <%= f.date_field :date, class: "form-control" %>
        </div>

        <div class="action">
          <%= f.submit class: "btn btn-primary" %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>